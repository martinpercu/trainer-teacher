<p>schools-crud works!</p>
<div class="schools-crud mx-auto mt-8 max-w-3xl bg-neutral-300 p-8">
  <h2 class="text-2xl font-bold mb-4">Cargar Escuela</h2>
  <select
    [ngModel]="selectedSchoolId"
    (change)="loadSchool($event)"
    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
    <option value="">Selecciona una escuela</option>
    @for (school of schools$ | async; track school.id) {
      <option [value]="school.id">{{ school.name }}</option>
    }
  </select>

  <h3 class="text-xl font-semibold mt-6 mb-4">{{ editingSchoolId ? 'Editar Escuela' : 'Crear Nueva Escuela' }}</h3>
  <form (ngSubmit)="saveSchool()" class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700">Nombre:</label>
      <input
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm"
        type="text"
        [(ngModel)]="newSchool.name"
        name="name"
        required
      >
      @if (errorMessage) {
        <p class="text-red-500 text-sm mt-1">{{ errorMessage }}</p>
      }
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Cursos:</label>
      <select
        multiple
        [(ngModel)]="newSchool.courseIds"
        name="courseIds"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm"
        size="5">
        @for (course of courses$ | async; track course.id) {
          <option [value]="course.id">{{ course.name }}</option>
        }
      </select>
    </div>

    <div class="flex space-x-2">
      <button
        type="submit"
        class="bg-green-500 text-white px-4 py-2 rounded-md">
        {{ editingSchoolId ? 'Actualizar Escuela' : 'Crear Escuela' }}
      </button>
      @if (editingSchoolId) {
        <button
          type="button"
          (click)="resetForm()"
          class="bg-gray-500 text-white px-4 py-2 rounded-md">
          Cancelar
        </button>
        <button
          type="button"
          (click)="deleteSchool()"
          class="bg-red-500 text-white px-4 py-2 rounded-md">
          Eliminar Escuela
        </button>
      }
    </div>
  </form>
</div>
